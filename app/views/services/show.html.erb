<div class="background-opacity">
	<div class="service-banner" style="background-image: url('<%= asset_path 'generic_photo.jpg', crop: :fill %>');"><h1><%= @service.title %></h1></div>
</div>

<div class="w-75 bg-light p-3" style="margin: 0px auto">
	<div class="row">
		<div class="col-sm-12 col-lg-7">	
			<div class="d-flex flex-column" style="width: 100%">
  		  		<div class="d-flex flex-column bg-secondary my-2 p-3 bg-white border" style="height: 20em">
  		  			<h3>Posted by: <%= @service.user.first_name %> <%= @service.user.last_name %></h3>
					<% if @service.user.photos.attached? %>
						<%= cl_image_tag @service.user.photo.key, width: 150, height: 150, crop: :thumb, gravity: :face, class: "avatar" %>
					<% else %>
						<%= image_tag "avatar.jpg", :alt => "avatar", width: 150, height: 150, crop: :thumb, gravity: :face, class: "avatar" %>
					<% end %>
					<p><strong>Price: Â£<%= @service.price %>.00/hr</strong></p>
					<p><strong>Category: <%= @service.category %></strong></p>
					<p><strong>Description:</strong></p>
					<p><%= @service.description %></p>
					<div class="action">
						<% if @service.user == current_user %>
							<%= link_to 'Edit', edit_service_path(@service), class: "fas fa-pencil-alt" %>
							<%= link_to 'Delete', @service, method: :delete, data: { confirm: 'Are you sure?' }, class: "far fa-trash-alt" %>
						<% end %>
						<%= link_to 'List', services_path, class: "far fa-list-alt" %>
					</div>
				</div>
			</div>
		</div>
		<div class="col-sm-12 col-lg-5 bg-secondary mt-2 p-3 bg-white border" style="height: 15em">
			<div>
			<%= simple_form_for([@service, @booking]) do |f| %>
				<%= f.input :deadline, html5: true, label: "Select deadline for this job:" %>
			  <%= f.submit class: "btn btn-dark" %>
			<% end %>
			</div>
		</div>
	</div>


<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
	<h3>Portfolio</h3>
	<div class="carousel-inner">
	  <% if @service.photos.attached? %>
  		<% @service.photos.each_with_index do |photo, index| %>
  			<!-- add logical statement to make first photo an active item -->
    		<div class="carousel-item <%= "active" if index.zero? %>" style=" height: 60vh">
        	<%= cl_image_tag photo.key, class: "d-block w-100" %>
    		</div>
      <% end %>
    <% end %>
	</div>
	<a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
	  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
	  <span class="sr-only">Previous</span>
	</a>
	<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
	  <span class="carousel-control-next-icon" aria-hidden="true"></span>
	  <span class="sr-only">Next</span>
	</a>
</div>

<div class="w-100 p-3">
	<div class="row">
		<div class="col-xs-12 col-lg-6 p-3 bg-white border">
			<h2>Add a review</h2>
			<%= simple_form_for([ @service, @review ], remote: true) do |f| %>
		  	<%= f.input :title %>
		  	<%= f.input :content %>
		  	<%= f.input :rating %>
		  	<%= f.submit class: "btn btn-dark" %>
			<% end %>
		</div>


		<div class="col-xs-12 col-lg-6">
			<% @reviews.each do |review| %>
				<div class="bg-white p-3 mb-4 border">
					<h1><%= review.title %></h1>
					<p id="review-<%= review.id %>"><%= review.content %></p>
					<% (review.rating).times do %> 
						<i class="fas fa-star"></i>
					<% end %>
					<% if review.user == current_user %>
						<%= link_to "Edit", edit_review_path(review), class: "btn btn-dark" %>
						<%= link_to "Delete", review_path(review), class: "btn btn-dark", method: :delete, data: { confirm: "Are you sure?" } %>
					<% else %>
						<%= review.user.first_name %><%= review.user.last_name %>
					<% end %>
				</div>	
			<% end %>
		</div>
	</div>
	</div>
</div>

